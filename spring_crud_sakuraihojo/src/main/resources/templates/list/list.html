<!DOCTYPE html>
<!-- saved from url=(0038)http://localhost:7779/spring_crud/list -->
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{common/layout_4block :: layout(~{::body/content()})}"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>社員管理システム</title>
</head>
<body>
	<div class="content">
		
		<article class="main">
			
	<h3>社員一覧画面</h3>
	<!-- セッション中にユーザ情報が存在する場合のみ以下の処理を実行する。 -->
    <!-- なお、セッション中のユーザ情報がない（null）の場合、-->
    <!-- フィルターの処理により、当該Thymeleaf処理完了後にログイン画面にリダイレクトする。 -->
		
        <div class="regist_link">
          <a th:if="${session.loginUser.authority == 2}" th:href="@{/regist/input}">新規社員登録</a>
        </div>
     	 

      	<div th:if="${#lists.isEmpty(empList)}" class="text_center">
			  <p>該当する社員は存在しません。</p>
			  <a th:href="@{/list}">一覧表示に戻る</a>
		</div>
		<table th:unless="${#lists.isEmpty(empList)}" class="list_table">
			<tbody><tr>
				<th class="empId">社員ID</th>
				<th class="empName">社員名</th>
				<div th:if="${session.loginUser.authority == 2}">
	              <th class="gender">性別</th>
	              <th class="address">住所</th>
	              <th class="birthday">生年月日</th>
	              <th class="authority">権限</th>
				</div>
	        	  <th class="deptName">部署名</th>
	        	<div th:if="${session.loginUser.authority == 2}">
	              <th class="button" colspan="2">操作</th>
	            </div>
			</tr>
			<tr th:each="emp: ${empList}" th:object="${emp}">
				<td th:text="*{empId}">1</td>
				<td th:text="*{empName}"></td>
				<div th:if="${session.loginUser.authority == 2}">
				<td th:text="*{genderStr}"></td>
	            <td th:text="*{address}"></td>
	            <td th:text="${#dates.format(emp.birthday, 'yyyy/MM/dd')}"></td>
	            <td th:text="*{authorityStr}"></td>
				</div>
	            <td th:text="*{department.deptName}"></td>
				<div th:if="${session.loginUser.authority == 2}">
				<td>
					<form method="get" th:action="@{/update/input}">
						<input type="hidden" name="empId" th:value="*{empId}">
						<input type="submit" value="変更">
					</form>
				</td>
				<td>
					<form method="get" th:action="@{/delete/check}">
						<input type="hidden" name="empId" th:value="*{empId}">
						<input type="submit" value="削除" class="delete">
					</form>
				</td>
				</div>
			</tr>
		</tbody></table>

		</article>
	</div>
	

</body></html>